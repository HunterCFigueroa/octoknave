<section>
  <div class="flexrow" style="min-height:50px;">
    <div class="flexcol flex-group-center">
      <div class="resource-label">{{localize "KNAVE2E.Slots"}}: </div>
      <div class="resource-label">{{system.slots.value}} / {{system.slots.max}}</div>
    </div>
    {{#if (eq system.rarity "KNAVE2E.Rare")}}
    <div class="flexcol flex-group-center">
      <div class="resource-label">{{localize "KNAVE2E.Spells"}}: </div>
      <div class="resource-label">{{system.spells.value}} / {{system.spells.max}}</div>
    </div>
    {{/if}}
    <div class="flexcol flex-group-center">
      <div class="resource-label">{{localize "KNAVE2E.AmmoBow"}}: </div>
      <input class="resource-label small" type="text" name="system.ammo.arrow" value="{{system.ammo.arrow}}"
        data-dtype="Number" />
    </div>
    <div class="flexcol flex-group-center">
      <div class="resource-label">{{localize "KNAVE2E.Sling"}} {{localize "KNAVE2E.AmmoSling"}}: </div>
      <input class="resource-label small" type="text" name="system.ammo.bullet" value="{{system.ammo.bullet}}"
        data-dtype="Number" />
    </div>
  </div>

  <hr>

  <ol class="items-list">
    <li class="item flexrow items-header">
      <div class="item-name flex3">{{localize "KNAVE2E.Name"}}</div>
      <div class="item-slots">{{localize "KNAVE2E.Slots"}}</div>
      <div class="item-controls">
        <a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add
          item</a>
      </div>
    </li>
    {{#each items as |item id|}}
    <li class="item flexrow {{#if system.dropped}}flex-dropped{{/if}}" data-item-id="{{item._id}}">
      <div class="item-name flex3 flex-between">
        <div class="flexrow flex-group-left item-info">
          <div class="item-image">
            <a class="rollable"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></a>
          </div>
          <h4>{{#if item.system.dropped}}({{localize "KNAVE2E.Dropped"}}) {{/if}}{{item.name}}</h4>
        </div>
        <div class="flexrow flex-group-right">
          {{#if (eq item.type "weapon")}}
          <button class="item-button attack sheet" data-action="attack" type="button"
            title={{localize "KNAVE2E.AttackRoll" }}>{{localize "KNAVE2E.AttackAbbr"}}</button>
          <button class="item-button damage sheet" data-action="damage" type="button"
            title={{localize "KNAVE2E.DamageRoll" }}>{{localize "KNAVE2E.DamageAbbr"}}</button>
          <button class="item-button damage sheet" data-action="direct" type="button"
            title={{localize "KNAVE2E.DirectRoll" }}>{{localize "KNAVE2E.DirectAbbr"}}</button>
          {{/if}}
          {{#if (eq item.type "spellbook")}}
          <button class="list-roll cast" data-action="cast" type="button">{{localize "KNAVE2E.CastAbbr"}}</button>
          {{/if}}
        </div>
      </div>
      <div class="item-slots item-prop">{{item.system.slots}}</div>
      <div class="item-controls">
        {{#if (eq item.type "weapon")}}
        <a class="item-control" data-action="toggle-break" title={{localize "KNAVE2E.BreakWeaponDetail" }}>
          <i class="fas {{#if item.system.broken}}fa-heart-broken{{else}}fa-heart{{/if}}"></i></a>
        {{/if}}
        {{#if (eq item.type "spellbook")}}
        <a class="item-control" data-action="toggle-cast" title={{localize "KNAVE2E.CastSpellbookDetail" }}>
          <i class="fas {{#if item.system.cast}}fa-book-open{{else}}fa-book{{/if}}"></i></a>
        {{/if}}
        {{#if (eq item.type "lightSource")}}
        <a class="item-control" data-action="toggle-light" title={{localize "KNAVE2E.ActivateLightSourceDetail" }}>
          <i class="{{#if item.system.lit}}fas fa-lightbulb{{else}}far fa-lightbulb{{/if}}"></i></a>
        {{/if}}
        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
      </div>
    </li>
    {{/each}}
  </ol>
</section>